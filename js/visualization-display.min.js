jQuery(function(b){var n=TVAjax.ajaxurl,h=[],c,d,k=function(j){var e=b("img",j),f=b(e).width(),e=b(e).data("originalWidth"),g=f/e,l=b(".tv-map",j),h=function(){c.fadeOut(function(){c.hide().empty();d.hide().empty()})},k=function(a){a&&(c||(c=b("<div/>",{id:"tv-modal"}).hide(),d=b("<div/>",{id:"tv-modal-bg"}).on("click",h),b("body").append(c).append(d)),c.html(a),c.fadeIn(),d.fadeIn())},m=function(a){b.post(n,{action:"get_visualization_content",contentId:a},k)},f=function(){var a=window.location.hash.match(/#technology\-(\d*)$/);
if(a=a&&a[1])(a=b(l).filter("[data-id="+a+"]"))&&m(a.data("id"))};b(l).each(function(){var a=b(this).data(),a={left:a.x1*g+"px",top:a.y1*g+"px",height:a.height*g+"px",width:a.width*g+"px"};b(this).css(a)});b(j).on("click",".tv-map",function(a){a.preventDefault();if(a=b(this).data("id")){var c=window.location.hash;window.location.hash="technology-"+a;c.match(RegExp("^#?technology-"+a+"$"))&&m(a)}});window.onhashchange=f;f()};b(".tv-visualization").each(function(){h.push(new k(b(this)))})});