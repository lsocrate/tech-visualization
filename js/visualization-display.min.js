(function(){jQuery(function(t){var n;return n=function(){function n(n,i,d){var e,h,l=this;this.container=n,this.isWidget=null!=d?d:!1,o=i,this.contents=t(".tv-map",this.container),e=t("img",this.container),h=e.width()/e.data("originalWidth"),this.contents.each(function(){return c(this,h)}),this.container.on("click",".tv-map",u),window.showContentModal=this.showContentModal,window.onhashchange=function(t){return a(l,t)},a(this)}var i,o,a,d,e,h,l,r,c,u,s;return o=null,i="px",n.modal=null,n.modalBg=null,d=function(){return window.location.hash=""},c=function(n,o){var a,d;return a=t(n).data(),d={left:a.x1*o+i,top:a.y1*o+i,height:a.height*o+i,width:a.width*o+i},t(n).css(d)},r=function(t){var n,i,o;return o=window.location.hash,n="technology-"+t,window.location.hash=n,i=RegExp("^#?"+n+"$"),!o.match(i)},e=function(){var t=this;return null!=this.modal?this.modal.fadeOut(function(){return t.modal.add(t.modalBg).hide().empty()}):void 0},l=function(n){var i,o,a;return i=t(document).scrollTop(),a=t(n).offset().top,o=a+t(n).height(),a>i||i>o?t(document).scrollTop(a):void 0},s=function(n,o){var a;if(n)return this.modal||(this.modal=t("<div/>",{id:"tv-modal"}).hide(),this.modalBg=t("<div/>",{id:"tv-modal-bg"}).on("click",d),t("body").append(this.modal).append(this.modalBg)),"function"==typeof o&&o(),a=t(document).scrollTop()+20+i,this.modal.html(n).css("top",a),this.modal.add(this.modalBg).fadeIn()},h=function(n,i){var a;return a={action:"get_visualization_content",contentId:n},this.isWidget?t.getJSON(o,a):t.post(o,a,function(t){return s(t,i)})},a=function(n,i){var o,a,d,r,c;return a=window.location.hash,a&&"#"!==a?(d=a.match(/#technology\-(.*)$/),c=null!=d?d[1]:void 0,c&&(r=t(n.contents).filter("[data-slug="+c+"]"))?(i||(o=l(n.container)),h(r.data("id"),o)):void 0):e()},u=function(n){var i;return n.preventDefault(),i=t(this).data("slug"),i?r(i):void 0},n}(),t(".tv-visualization").each(function(){return new n(t(this),TVAjax.ajaxurl)})})}).call(this);